{"ast":null,"code":"var _jsxFileName = \"/home/dh/projetos/sd-015-b-project-recipes-app/src/pages/ComidasEmProgresso.jsx\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\nimport RecipesAppContext from '../context/RecipesAppContext';\nimport { getIngredient } from '../services/Functions';\nexport default function ComidasEmProgresso() {\n  const {\n    idDishes,\n    setFoodId,\n    setInProgress\n  } = useContext(RecipesAppContext);\n  const {\n    dishId\n  } = useParams();\n  setFoodId(dishId);\n  const [dish] = idDishes;\n  const history = useHistory();\n  const [checks, setCheck] = useState(0);\n  const [ingredientsUsed, setIngredientsUsed] = useState([]);\n  useEffect(() => {\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n\n    if (inProgress && inProgress.meals[dishId]) {\n      setInProgress(inProgress);\n      console.log('didMount', inProgress);\n      setIngredientsUsed(inProgress.meals[dishId]);\n    }\n  }, [dishId, setInProgress]);\n  useEffect(() => {\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n\n    if (inProgress) {\n      inProgress.meals[dishId] = ingredientsUsed;\n      console.log('ingredientsUsed', inProgress);\n      setInProgress(inProgress);\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgress));\n    }\n  }, [ingredientsUsed, dishId, setInProgress]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, \"In Progress\"), dish && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"recipe-photo\",\n    src: `${dish.strMealThumb}`,\n    alt: \"\",\n    width: \"400\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"recipe-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, dish.strMeal), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, dish.strCategory), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, dish.strInstructions), getIngredient(dish).map(ingredient => /*#__PURE__*/React.createElement(\"div\", {\n    key: ingredient.index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    \"data-testid\": `${ingredient.index - 1}-ingredient-step`,\n    htmlFor: ingredient.nome,\n    className: ingredientsUsed.includes(ingredient.index) ? 'stepDone' : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    id: ingredient.nome,\n    checked: ingredientsUsed.includes(ingredient.index),\n    onChange: async ({\n      target\n    }) => {\n      const text = target.parentElement;\n      text.classList.toggle('stepDone');\n\n      if (target.checked) {\n        setCheck(checks + 1);\n        setIngredientsUsed([...ingredientsUsed, ingredient.index]);\n      } else {\n        setCheck(checks - 1);\n        const index = ingredientsUsed.indexOf(ingredient.index);\n        ingredientsUsed.splice(index, 1);\n        setIngredientsUsed([...ingredientsUsed]);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 19\n    }\n  }), `${ingredient.nome} - ${ingredient.quantidade}`))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    \"data-testid\": \"share-btn\",\n    value: \"Compartilhar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    \"data-testid\": \"favorite-btn\",\n    value: \"Favoritar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    \"data-testid\": \"finish-recipe-btn\",\n    disabled: checks !== getIngredient(dish).length,\n    onClick: () => history.push('/receitas-feitas'),\n    value: \"Finalizar-Receita\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  })));\n}","map":{"version":3,"sources":["/home/dh/projetos/sd-015-b-project-recipes-app/src/pages/ComidasEmProgresso.jsx"],"names":["React","useContext","useState","useEffect","useParams","useHistory","RecipesAppContext","getIngredient","ComidasEmProgresso","idDishes","setFoodId","setInProgress","dishId","dish","history","checks","setCheck","ingredientsUsed","setIngredientsUsed","inProgress","JSON","parse","localStorage","getItem","meals","console","log","setItem","stringify","strMealThumb","strMeal","strCategory","strInstructions","map","ingredient","index","nome","includes","target","text","parentElement","classList","toggle","checked","indexOf","splice","quantidade","length","push"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAuD,OAAvD;AAEA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,UAAT,QAA2B,2CAA3B;AACA,OAAOC,iBAAP,MAA8B,8BAA9B;AACA,SAASC,aAAT,QAA8B,uBAA9B;AAEA,eAAe,SAASC,kBAAT,GAA8B;AAC3C,QAAM;AACJC,IAAAA,QADI;AAEJC,IAAAA,SAFI;AAGJC,IAAAA;AAHI,MAIFV,UAAU,CAACK,iBAAD,CAJd;AAKA,QAAM;AAAEM,IAAAA;AAAF,MAAaR,SAAS,EAA5B;AACAM,EAAAA,SAAS,CAACE,MAAD,CAAT;AACA,QAAM,CAACC,IAAD,IAASJ,QAAf;AAEA,QAAMK,OAAO,GAAGT,UAAU,EAA1B;AACA,QAAM,CAACU,MAAD,EAASC,QAAT,IAAqBd,QAAQ,CAAC,CAAD,CAAnC;AACA,QAAM,CAACe,eAAD,EAAkBC,kBAAlB,IAAwChB,QAAQ,CAAC,EAAD,CAAtD;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMgB,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,mBAArB,CAAX,CAAnB;;AACA,QAAIJ,UAAU,IAAIA,UAAU,CAACK,KAAX,CAAiBZ,MAAjB,CAAlB,EAA4C;AAC1CD,MAAAA,aAAa,CAACQ,UAAD,CAAb;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBP,UAAxB;AACAD,MAAAA,kBAAkB,CAACC,UAAU,CAACK,KAAX,CAAiBZ,MAAjB,CAAD,CAAlB;AACD;AACF,GAPQ,EAON,CAACA,MAAD,EAASD,aAAT,CAPM,CAAT;AASAR,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMgB,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,mBAArB,CAAX,CAAnB;;AACA,QAAIJ,UAAJ,EAAgB;AACdA,MAAAA,UAAU,CAACK,KAAX,CAAiBZ,MAAjB,IAA2BK,eAA3B;AACAQ,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BP,UAA/B;AACAR,MAAAA,aAAa,CAACQ,UAAD,CAAb;AACAG,MAAAA,YAAY,CAACK,OAAb,CAAqB,mBAArB,EAA0CP,IAAI,CAACQ,SAAL,CAAeT,UAAf,CAA1C;AACD;AACF,GARQ,EAQN,CAACF,eAAD,EAAkBL,MAAlB,EAA0BD,aAA1B,CARM,CAAT;AAUA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAGIE,IAAI,iBACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,mBAAY,cADd;AAEE,IAAA,GAAG,EAAI,GAAEA,IAAI,CAACgB,YAAa,EAF7B;AAGE,IAAA,GAAG,EAAC,EAHN;AAIE,IAAA,KAAK,EAAC,KAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAOE;AAAG,mBAAY,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+BhB,IAAI,CAACiB,OAApC,CAPF,eAQE;AAAG,mBAAY,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAkCjB,IAAI,CAACkB,WAAvC,CARF,eASE;AAAG,mBAAY,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+BlB,IAAI,CAACmB,eAApC,CATF,EAUIzB,aAAa,CAACM,IAAD,CAAb,CAAoBoB,GAApB,CAAyBC,UAAD,iBACxB;AACE,IAAA,GAAG,EAAGA,UAAU,CAACC,KADnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAGE;AACE,mBAAe,GAAED,UAAU,CAACC,KAAX,GAAmB,CAAE,kBADxC;AAEE,IAAA,OAAO,EAAGD,UAAU,CAACE,IAFvB;AAGE,IAAA,SAAS,EACPnB,eAAe,CAACoB,QAAhB,CAAyBH,UAAU,CAACC,KAApC,IAA6C,UAA7C,GAA0D,IAJ9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAOE;AACE,IAAA,IAAI,EAAC,UADP;AAEE,IAAA,EAAE,EAAGD,UAAU,CAACE,IAFlB;AAGE,IAAA,OAAO,EAAGnB,eAAe,CAACoB,QAAhB,CAAyBH,UAAU,CAACC,KAApC,CAHZ;AAIE,IAAA,QAAQ,EAAG,OAAO;AAAEG,MAAAA;AAAF,KAAP,KAAsB;AAC/B,YAAMC,IAAI,GAAGD,MAAM,CAACE,aAApB;AACAD,MAAAA,IAAI,CAACE,SAAL,CAAeC,MAAf,CAAsB,UAAtB;;AACA,UAAIJ,MAAM,CAACK,OAAX,EAAoB;AAClB3B,QAAAA,QAAQ,CAACD,MAAM,GAAG,CAAV,CAAR;AACAG,QAAAA,kBAAkB,CAAC,CAAC,GAAGD,eAAJ,EAAqBiB,UAAU,CAACC,KAAhC,CAAD,CAAlB;AACD,OAHD,MAGO;AACLnB,QAAAA,QAAQ,CAACD,MAAM,GAAG,CAAV,CAAR;AACA,cAAMoB,KAAK,GAAGlB,eAAe,CAAC2B,OAAhB,CAAwBV,UAAU,CAACC,KAAnC,CAAd;AACAlB,QAAAA,eAAe,CAAC4B,MAAhB,CAAuBV,KAAvB,EAA8B,CAA9B;AACAjB,QAAAA,kBAAkB,CAAC,CAAC,GAAGD,eAAJ,CAAD,CAAlB;AACD;AACF,KAhBH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,EAyBI,GAAEiB,UAAU,CAACE,IAAK,MAAKF,UAAU,CAACY,UAAW,EAzBjD,CAHF,CADA,CAVJ,eA4CE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,mBAAY,WAFd;AAGE,IAAA,KAAK,EAAC,cAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA5CF,eAiDE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,mBAAY,cAFd;AAGE,IAAA,KAAK,EAAC,WAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjDF,eAsDE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,mBAAY,mBAFd;AAGE,IAAA,QAAQ,EAAI/B,MAAM,KAAKR,aAAa,CAACM,IAAD,CAAb,CAAoBkC,MAH7C;AAIE,IAAA,OAAO,EAAG,MAAMjC,OAAO,CAACkC,IAAR,CAAa,kBAAb,CAJlB;AAKE,IAAA,KAAK,EAAC,mBALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtDF,CAJN,CADF;AAuED","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\n\r\nimport { useParams } from 'react-router-dom';\r\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport RecipesAppContext from '../context/RecipesAppContext';\r\nimport { getIngredient } from '../services/Functions';\r\n\r\nexport default function ComidasEmProgresso() {\r\n  const {\r\n    idDishes,\r\n    setFoodId,\r\n    setInProgress,\r\n  } = useContext(RecipesAppContext);\r\n  const { dishId } = useParams();\r\n  setFoodId(dishId);\r\n  const [dish] = idDishes;\r\n\r\n  const history = useHistory();\r\n  const [checks, setCheck] = useState(0);\r\n  const [ingredientsUsed, setIngredientsUsed] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\r\n    if (inProgress && inProgress.meals[dishId]) {\r\n      setInProgress(inProgress);\r\n      console.log('didMount', inProgress);\r\n      setIngredientsUsed(inProgress.meals[dishId]);\r\n    }\r\n  }, [dishId, setInProgress]);\r\n\r\n  useEffect(() => {\r\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\r\n    if (inProgress) {\r\n      inProgress.meals[dishId] = ingredientsUsed;\r\n      console.log('ingredientsUsed', inProgress);\r\n      setInProgress(inProgress);\r\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgress));\r\n    }\r\n  }, [ingredientsUsed, dishId, setInProgress]);\r\n\r\n  return (\r\n    <div>\r\n      <h2>In Progress</h2>\r\n      {\r\n        dish && (\r\n          <div>\r\n            <img\r\n              data-testid=\"recipe-photo\"\r\n              src={ `${dish.strMealThumb}` }\r\n              alt=\"\"\r\n              width=\"400\"\r\n            />\r\n            <p data-testid=\"recipe-title\">{dish.strMeal}</p>\r\n            <p data-testid=\"recipe-category\">{dish.strCategory}</p>\r\n            <p data-testid=\"instructions\">{dish.strInstructions}</p>\r\n            { getIngredient(dish).map((ingredient) => (\r\n              <div\r\n                key={ ingredient.index }\r\n              >\r\n                <label\r\n                  data-testid={ `${ingredient.index - 1}-ingredient-step` }\r\n                  htmlFor={ ingredient.nome }\r\n                  className={\r\n                    ingredientsUsed.includes(ingredient.index) ? 'stepDone' : null\r\n                  }\r\n                >\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id={ ingredient.nome }\r\n                    checked={ ingredientsUsed.includes(ingredient.index) }\r\n                    onChange={ async ({ target }) => {\r\n                      const text = target.parentElement;\r\n                      text.classList.toggle('stepDone');\r\n                      if (target.checked) {\r\n                        setCheck(checks + 1);\r\n                        setIngredientsUsed([...ingredientsUsed, ingredient.index]);\r\n                      } else {\r\n                        setCheck(checks - 1);\r\n                        const index = ingredientsUsed.indexOf(ingredient.index);\r\n                        ingredientsUsed.splice(index, 1);\r\n                        setIngredientsUsed([...ingredientsUsed]);\r\n                      }\r\n                    } }\r\n                  />\r\n                  {`${ingredient.nome} - ${ingredient.quantidade}`}\r\n                </label>\r\n              </div>\r\n            ))}\r\n\r\n            <input\r\n              type=\"button\"\r\n              data-testid=\"share-btn\"\r\n              value=\"Compartilhar\"\r\n            />\r\n            <input\r\n              type=\"button\"\r\n              data-testid=\"favorite-btn\"\r\n              value=\"Favoritar\"\r\n            />\r\n            <input\r\n              type=\"button\"\r\n              data-testid=\"finish-recipe-btn\"\r\n              disabled={ (checks !== getIngredient(dish).length) }\r\n              onClick={ () => history.push('/receitas-feitas') }\r\n              value=\"Finalizar-Receita\"\r\n            />\r\n          </div>\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}