{"ast":null,"code":"var _jsxFileName = \"/home/dh/Repositorio/appfood/AppFood/src/pages/BebidasEmProgresso.jsx\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { useHistory } from 'react-router-dom';\nimport FavoriteButton from '../components/FavoriteButton';\nimport RecipesAppContext from '../context/RecipesAppContext';\nimport { getIngredient } from '../services/Functions';\nexport default function BebidasEmProgresso() {\n  const {\n    idDrinks,\n    setDrinkId,\n    setInProgress\n  } = useContext(RecipesAppContext);\n  const {\n    drinkId\n  } = useParams();\n  setDrinkId(drinkId);\n  const [drink] = idDrinks;\n  const history = useHistory();\n  const [checks, setCheck] = useState(0);\n  const [ingredientsUsed, setIngredientsUsed] = useState([]);\n  useEffect(() => {\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n\n    if (inProgress && inProgress.cocktails[drinkId]) {\n      setInProgress(inProgress);\n      setIngredientsUsed(inProgress.cocktails[drinkId]);\n    }\n  }, [drinkId, setInProgress]);\n  useEffect(() => {\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n\n    if (inProgress) {\n      inProgress.cocktails[drinkId] = ingredientsUsed;\n      setInProgress(inProgress);\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgress));\n    }\n\n    setCheck(ingredientsUsed.length);\n  }, [ingredientsUsed, drinkId, setInProgress]);\n\n  const finishRecipe = () => {\n    let doneRecipes = JSON.parse(localStorage.getItem('doneRecipes'));\n\n    if (doneRecipes) {\n      doneRecipes.push({\n        id: drinkId,\n        type: 'bebida',\n        area: '',\n        category: drink.strCategory,\n        alcoholicOrNot: drink.strAlcoholic,\n        name: drink.strDrink,\n        image: drink.strDrinkThumb,\n        tags: []\n      });\n    } else {\n      doneRecipes = [{\n        id: drinkId,\n        type: 'bebida',\n        area: '',\n        category: drink.strCategory,\n        alcoholicOrNot: drink.strAlcoholic,\n        name: drink.strDrink,\n        image: drink.strDrinkThumb,\n        tags: []\n      }];\n    }\n\n    localStorage.setItem('doneRecipes', JSON.stringify(doneRecipes));\n    history.push('/receitas-feitas');\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, drink && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"recipe-photo\",\n    src: `${drink.strDrinkThumb}`,\n    alt: \"\",\n    width: \"400\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"recipe-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, drink.strDrink), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, drink.strAlcoholic), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, drink.strCategory, drink.strAlcoholic), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, drink.strInstructions), getIngredient(drink).map(ingredient => /*#__PURE__*/React.createElement(\"div\", {\n    key: ingredient.nome,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    \"data-testid\": `${ingredient.index - 1}-ingredient-step`,\n    htmlFor: ingredient.nome,\n    className: ingredientsUsed.includes(ingredient.index) ? 'stepDone' : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    id: ingredient.nome,\n    checked: ingredientsUsed.includes(ingredient.index),\n    onChange: async ({\n      target\n    }) => {\n      const text = target.parentElement;\n      text.classList.toggle('stepDone');\n\n      if (target.checked) {\n        setIngredientsUsed([...ingredientsUsed, ingredient.index]);\n      } else {\n        const index = ingredientsUsed.indexOf(ingredient.index);\n        ingredientsUsed.splice(index, 1);\n        setIngredientsUsed([...ingredientsUsed]);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 19\n    }\n  }), `${ingredient.nome} - ${ingredient.quantidade}`))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    \"data-testid\": \"share-btn\",\n    value: \"Compartilhar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(FavoriteButton, {\n    id: drinkId,\n    type: \"bebida\",\n    recipe: drink,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    \"data-testid\": \"finish-recipe-btn\",\n    value: \"Finalizar Receita\",\n    disabled: checks !== getIngredient(drink).length,\n    onClick: finishRecipe,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  })));\n}","map":{"version":3,"sources":["/home/dh/Repositorio/appfood/AppFood/src/pages/BebidasEmProgresso.jsx"],"names":["React","useContext","useEffect","useState","useParams","useHistory","FavoriteButton","RecipesAppContext","getIngredient","BebidasEmProgresso","idDrinks","setDrinkId","setInProgress","drinkId","drink","history","checks","setCheck","ingredientsUsed","setIngredientsUsed","inProgress","JSON","parse","localStorage","getItem","cocktails","setItem","stringify","length","finishRecipe","doneRecipes","push","id","type","area","category","strCategory","alcoholicOrNot","strAlcoholic","name","strDrink","image","strDrinkThumb","tags","strInstructions","map","ingredient","nome","index","includes","target","text","parentElement","classList","toggle","checked","indexOf","splice","quantidade"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { useHistory } from 'react-router-dom';\nimport FavoriteButton from '../components/FavoriteButton';\nimport RecipesAppContext from '../context/RecipesAppContext';\nimport { getIngredient } from '../services/Functions';\n\nexport default function BebidasEmProgresso() {\n  const { idDrinks, setDrinkId, setInProgress } = useContext(RecipesAppContext);\n  const { drinkId } = useParams();\n  setDrinkId(drinkId);\n  const [drink] = idDrinks;\n\n  const history = useHistory();\n  const [checks, setCheck] = useState(0);\n  const [ingredientsUsed, setIngredientsUsed] = useState([]);\n\n  useEffect(() => {\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    if (inProgress && inProgress.cocktails[drinkId]) {\n      setInProgress(inProgress);\n      setIngredientsUsed(inProgress.cocktails[drinkId]);\n    }\n  }, [drinkId, setInProgress]);\n\n  useEffect(() => {\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    if (inProgress) {\n      inProgress.cocktails[drinkId] = ingredientsUsed;\n      setInProgress(inProgress);\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgress));\n    }\n    setCheck(ingredientsUsed.length);\n  }, [ingredientsUsed, drinkId, setInProgress]);\n\n  const finishRecipe = () => {\n    let doneRecipes = JSON.parse(localStorage.getItem('doneRecipes'));\n    if (doneRecipes) {\n      doneRecipes.push({\n        id: drinkId,\n        type: 'bebida',\n        area: '',\n        category: drink.strCategory,\n        alcoholicOrNot: drink.strAlcoholic,\n        name: drink.strDrink,\n        image: drink.strDrinkThumb,\n        tags: [],\n      });\n    } else {\n      doneRecipes = [{\n        id: drinkId,\n        type: 'bebida',\n        area: '',\n        category: drink.strCategory,\n        alcoholicOrNot: drink.strAlcoholic,\n        name: drink.strDrink,\n        image: drink.strDrinkThumb,\n        tags: [],\n      }];\n    }\n\n    localStorage.setItem('doneRecipes', JSON.stringify(doneRecipes));\n    history.push('/receitas-feitas');\n  };\n\n  return (\n    <div>\n      { drink\n        && (\n          <div>\n            <img\n              data-testid=\"recipe-photo\"\n              src={ `${drink.strDrinkThumb}` }\n              alt=\"\"\n              width=\"400\"\n            />\n            <p data-testid=\"recipe-title\">{drink.strDrink}</p>\n            <p>{drink.strAlcoholic}</p>\n            <p data-testid=\"recipe-category\">\n              {drink.strCategory}\n              {drink.strAlcoholic}\n            </p>\n            <p data-testid=\"instructions\">{drink.strInstructions}</p>\n            { getIngredient(drink).map((ingredient) => (\n              <div key={ ingredient.nome }>\n                <label\n                  data-testid={ `${ingredient.index - 1}-ingredient-step` }\n                  htmlFor={ ingredient.nome }\n                  className={\n                    ingredientsUsed.includes(ingredient.index) ? 'stepDone' : null\n                  }\n                >\n                  <input\n                    type=\"checkbox\"\n                    id={ ingredient.nome }\n                    checked={ ingredientsUsed.includes(ingredient.index) }\n                    onChange={ async ({ target }) => {\n                      const text = target.parentElement;\n                      text.classList.toggle('stepDone');\n                      if (target.checked) {\n                        setIngredientsUsed([...ingredientsUsed, ingredient.index]);\n                      } else {\n                        const index = ingredientsUsed.indexOf(ingredient.index);\n                        ingredientsUsed.splice(index, 1);\n                        setIngredientsUsed([...ingredientsUsed]);\n                      }\n                    } }\n                  />\n                  {`${ingredient.nome} - ${ingredient.quantidade}`}\n                </label>\n              </div>\n            ))}\n\n            <input\n              type=\"button\"\n              data-testid=\"share-btn\"\n              value=\"Compartilhar\"\n            />\n            <FavoriteButton id={ drinkId } type=\"bebida\" recipe={ drink } />\n            <input\n              type=\"button\"\n              data-testid=\"finish-recipe-btn\"\n              value=\"Finalizar Receita\"\n              disabled={ (checks !== getIngredient(drink).length) }\n              onClick={ finishRecipe }\n            />\n          </div>)}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}