{"ast":null,"code":"import _defineProperty from\"/home/dh/Repositorio/AppFood/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/dh/Repositorio/AppFood/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/dh/Repositorio/AppFood/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from'react';import{Link,useHistory}from'react-router-dom';import Footer from'../components/Footer';import Header from'../components/Header';import Categories from'../components/Categories';import RecipesAppContext from'../context/RecipesAppContext';import RequisitionFood,{getFoodIngredients,RequisitionIdFood}from'../services/RequestDishes';import'../css/recipes.css';import heart from'../images/heart.png';export default function Comidas(){var _useContext=useContext(RecipesAppContext),dishes=_useContext.dishes,setDishesRequest=_useContext.setDishesRequest,setDishes=_useContext.setDishes,toggle=_useContext.toggle;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),foodDetails=_useState2[0],setFoodDetails=_useState2[1];useEffect(function(){dishes.forEach(function(_ref){var idMeal=_ref.idMeal;RequisitionIdFood(idMeal).then(function(data){var _data$=data[0],strCategory=_data$.strCategory,strArea=_data$.strArea;setFoodDetails(function(food){return _objectSpread(_objectSpread({},food),{},_defineProperty({},idMeal,{strArea:strArea,strCategory:strCategory}));});});});},[dishes]);var MAX_STRING_LENGTH=18;var history=useHistory();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{\"data-testid\":\"comida\"},/*#__PURE__*/React.createElement(Header,{title:\"Comidas\",searchBtn:true,request:setDishesRequest}),!toggle&&/*#__PURE__*/React.createElement(Categories,{getCategories:getFoodIngredients,getByCategorie:RequisitionFood,setRequest:setDishesRequest,keyRequest:{type:'',description:''},setElements:setDishes,img:\"Dishes\",route:\"/comidas\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"recipes-container\"},dishes?dishes.map(function(_ref2){var idMeal=_ref2.idMeal,strMealThumb=_ref2.strMealThumb,strMeal=_ref2.strMeal;return/*#__PURE__*/React.createElement(Link,{to:\"comidas/\".concat(idMeal),style:{display:'block'},key:idMeal,className:\"recipe-card\"},/*#__PURE__*/React.createElement(\"img\",{className:\"img-card\",src:strMealThumb,alt:strMeal,width:\"150\"}),/*#__PURE__*/React.createElement(\"p\",null,\"\".concat(strMeal.slice(0,MAX_STRING_LENGTH))),/*#__PURE__*/React.createElement(\"p\",{className:\"category-paragraph\"},foodDetails[idMeal]&&foodDetails[idMeal].strCategory),/*#__PURE__*/React.createElement(\"div\",{className:\"container-details\"},/*#__PURE__*/React.createElement(\"p\",{className:\"area-paragraph\"},foodDetails[idMeal]&&foodDetails[idMeal].strArea),/*#__PURE__*/React.createElement(\"img\",{src:heart,alt:\"\",width:\"20px\"})),dishes.length===1&&dishes[0].idMeal!=='52968'&&history.push(\"comidas/\".concat(dishes[0].idMeal)));}):global.alert('Sinto muito, não encontramos nenhuma receita para esses filtros.'))),/*#__PURE__*/React.createElement(Footer,null));}","map":{"version":3,"sources":["/home/dh/Repositorio/AppFood/src/pages/Comidas.jsx"],"names":["React","useContext","useState","useEffect","Link","useHistory","Footer","Header","Categories","RecipesAppContext","RequisitionFood","getFoodIngredients","RequisitionIdFood","heart","Comidas","dishes","setDishesRequest","setDishes","toggle","foodDetails","setFoodDetails","forEach","idMeal","then","data","strCategory","strArea","food","MAX_STRING_LENGTH","history","type","description","map","strMealThumb","strMeal","display","slice","length","push","global","alert"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport Footer from '../components/Footer';\nimport Header from '../components/Header';\nimport Categories from '../components/Categories';\nimport RecipesAppContext from '../context/RecipesAppContext';\nimport RequisitionFood, {\n  getFoodIngredients, RequisitionIdFood } from '../services/RequestDishes';\nimport '../css/recipes.css';\nimport heart from '../images/heart.png';\n\nexport default function Comidas() {\n  const { dishes, setDishesRequest, setDishes, toggle } = useContext(RecipesAppContext);\n  const [foodDetails, setFoodDetails] = useState({});\n\n  useEffect(() => {\n    dishes.forEach(({ idMeal }) => {\n      RequisitionIdFood(idMeal)\n        .then((data) => {\n          const { strCategory, strArea } = data[0];\n          setFoodDetails((food) => ({ ...food, [idMeal]: { strArea, strCategory } }));\n        });\n    });\n  }, [dishes]);\n  const MAX_STRING_LENGTH = 18;\n  const history = useHistory();\n  return (\n    <>\n      <div data-testid=\"comida\">\n        <Header title=\"Comidas\" searchBtn request={ setDishesRequest } />\n        { !toggle\n      && <Categories\n        getCategories={ getFoodIngredients }\n        getByCategorie={ RequisitionFood }\n        setRequest={ setDishesRequest }\n        keyRequest={ { type: '', description: '' } }\n        setElements={ setDishes }\n        img=\"Dishes\"\n        route=\"/comidas\"\n      />}\n        <div className=\"recipes-container\">\n          {\n            dishes\n              ? dishes.map(({ idMeal, strMealThumb, strMeal }) => (\n                <Link\n                  to={ `comidas/${idMeal}` }\n                  style={ { display: 'block' } }\n                  key={ idMeal }\n                  className=\"recipe-card\"\n                >\n                  <img\n                    className=\"img-card\"\n                    src={ strMealThumb }\n                    alt={ strMeal }\n                    width=\"150\"\n                  />\n                  <p>{`${strMeal.slice(0, MAX_STRING_LENGTH)}`}</p>\n                  <p className=\"category-paragraph\">\n                    { foodDetails[idMeal] && foodDetails[idMeal].strCategory }\n                  </p>\n                  <div className=\"container-details\">\n                    <p className=\"area-paragraph\">\n                      { foodDetails[idMeal] && foodDetails[idMeal].strArea }\n                    </p>\n                    <img src={ heart } alt=\"\" width=\"20px\" />\n                  </div>\n                  { dishes.length === 1\n                    && (dishes[0].idMeal !== '52968'\n                    && history.push(`comidas/${dishes[0].idMeal}`)) }\n                </Link>\n              ))\n              : global\n                .alert('Sinto muito, não encontramos nenhuma receita para esses filtros.')\n          }\n        </div>\n      </div>\n      <Footer />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}